%---- ここから本文 ----%
\subsection{プログラム内部}
このプログラムは、\texttt{TCORA}と\texttt{TCORB}の間隔を設定することで音階を決め, 0.01秒を繰り返すことで音が鳴り続ける時間を決めている.
演奏データはデータ列として定める. データ列は周波数, 0.01秒の繰り返し回数の順, その二つのデータによって一つの音が決まる. 
受け取った演奏データに対して次のような処理を行う. 

\begin{enumerate}

\item 演奏データの周波数を読み出す. そのデータを\texttt{TCORB}に右シフトしたものを\texttt{TCORA}に設定する. この周波数が\texttt{\#0xFF}(無音を意味する)の時は, \texttt{TCORA}のみに設定する. 

\item 演奏データの繰り返し回数を読み出す. その繰り返し回数が0になるまで0.01秒待つ処理を行う. 

\item 演奏データの次のデータが0の時処理を終了する. 0でないときは, 再び1から同じ処理を繰り返す. 
\end{enumerate}

音の変化を分かりやすくするため, 2と3の処理の間に無音を0.01秒挟んでいる.しかし, 演奏データによっては挟んでいない場合もある.
およそ0.01秒待つ処理は, 実験指導書\cite{text}の第13章の\texttt{\_wait\_1sec}(本プログラムでは\texttt{\_wait\_001sec}と変更した)の\texttt{r0}と\texttt{r1}に111を代入することで実現している. また, 演奏データが0のみか演奏データの最後に0が無い場合は, 処理が終了しない可能性があるため注意する必要がある. 
各プログラムのソースコードは付録\ref{sec:sourcecode}に掲載する. 
%----　　終わり    ----%


